# 操作系统Lab3实验报告

2013011303
计32
程凯

## 练习一：给未被映射的地址映射上物理页

### 设计实现过程

使用到了lab2中的`get_pte`函数：根据给定的地址，查找相应的页表项。如果页表项不存在，则创建一个页表项。如果创建失败就跳转到失败标志。
调用`pgdir_alloc_page`函数：如果物理地址不存在，则分配一个页，并且将这个物理地址和逻辑地址映射起来。如果不能够分配就跳转到失败标志。


### PDE和PTE中组成部分对ucore实现页替换算法的潜在用处
PDE和PTE的前20位用于寻找页表。其他的还可以用于VALID位表示页表项在内存还是在外存中，时间位用于时钟置换算法，修改位服务于写回等
<br>
### 缺页服务例程在执行过程中出现页访问异常，硬件需要做哪些事情
硬件需要设置中断标志、保存部分现场，然后转交中断例程，返回后消除中断标志并恢复现场。
<br>
## 练习二：实现寻找虚拟地址对应的页表项
### 我的设计实现过程
在`_fifo_map_swappable`函数中，将传入的最近访问页连在双向链表上。在`_fifo_swap_out_victim`函数中，找到最后的一个页，将对应的链表项删除，并返回这个页面。


### 如果要在ucore上实现"extended clock页替换算法"，现有的swap_manager框架是否足以支持在ucore中实现此算法？如果是，请给你的设计方案。如果不是，请给出你的新的扩展和基此扩展的设计方案
<br>
不可以,首先要使用环状链表维护页表项，同时要加入修改位和时间位，可以利用ticks更新这些位且同时还要维护一个全局指针，用于记录环状链表当前起始位置。
###需要被换出的页的特征是什么
访问过，且修改过。
###ucore中如何判断具有这样特征的页
通过flags中特殊的几位来判断。
###何时进行换入和换出操作
发生缺页的时候。

##与参考答案区别
lab1中跳转到失败标志时未输出错误信息


## 重要知识点
- FIFO页替换算法
- 页和页表的分配
- 虚拟存储的概念，从硬盘中读写资源
- 缺页异常的处理流程
- 判断处理页缺失

## 没有的知识点
- 其他局部页置换算法
- 全局页置换算法
